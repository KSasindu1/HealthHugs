--Create a Server Login

CREATE LOGIN kamal
WITH PASSWORD = 'temp123',
DEFAULT DATABASE = master,DEFAULT_LANGUAGE = us_english;


SA- System Admin


--Fixed Server role

ALTER SERVER ROLE dbcreator ADD MEMBER kamal;
ALTER SERVER ROLE securityadmin ADD MEMBER kamal;


--drop fixed roles for userdefined ones

ALTER SERVER ROLE dbcreator DROP MEMBER Kamal  -- drop create db
ALTER SERVER ROLE securityadmin DROP MEMBER Kamal  -- drop create logins



--user defined server role

CREATE SERVER ROLE seniorDBA
GRANT CREATE ANY DATABASE,ALTER ANY LOGIN TO seniorDBA
ALTER SERVER ROLE seniorDBA add member Kamal


-- Logins for user 
CREATE LOGIN sahan
WITH PASSWORD = 'tmp123',
DEFAULT_DATABASE = payroll,
DEFAULT_LANGUAGE = us_english;



--db logins for user

USE inventory
CREATE USER namalie FOR LOGIN Namalie



--db logins alterations fixed

USE inventory
ALTER ROLE db_owner ADD member Namalie
ALTER ROLE db_securityadmin ADD member Namalie
ALTER ROLE db_ddladmin ADD member Namalie 


--user defined db role 
USE Payroll
CREATE ROLE juniorDBA
GRANT CREATE TABLE , ALTER ANY ROLE , ALTER ANY USER TO juniorDBA
ALTER ROLE juniorDBA add member Janaka

--data entry role
USE inventory
CREATE USER sahan FOR LOGIN Sahan


USE inventory
CREATE ROLE dbDevloper
GRANT CREATE table , alter , references to dbDeveloper
alter role dbDeveloper add member Sahan






